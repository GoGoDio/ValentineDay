<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Dasha ‚ù§Ô∏è</title>
<style>
body { margin:0; overflow:hidden; background:black; }
canvas { display:block; }
</style>
</head>
<body>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
camera.position.z = 250;

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

// ‚≠ê Stars
let starGeo = new THREE.BufferGeometry();
let starCount = 4000;
let starPos = new Float32Array(starCount*3);

for(let i=0;i<starCount;i++){
    starPos[i*3]=(Math.random()-0.5)*1500;
    starPos[i*3+1]=(Math.random()-0.5)*1500;
    starPos[i*3+2]=(Math.random()-0.5)*1500;
}
starGeo.setAttribute('position', new THREE.BufferAttribute(starPos,3));

let starMat = new THREE.PointsMaterial({
    color:0xffffff,
    size:1
});
let stars = new THREE.Points(starGeo, starMat);
scene.add(stars);

// ‚ú® Particles
let particleCount = 5000;
let geometry = new THREE.BufferGeometry();
let positions = new Float32Array(particleCount*3);

for(let i=0;i<particleCount;i++){
    positions[i*3]=(Math.random()-0.5)*200;
    positions[i*3+1]=(Math.random()-0.5)*200;
    positions[i*3+2]=(Math.random()-0.5)*200;
}

geometry.setAttribute('position', new THREE.BufferAttribute(positions,3));

let material = new THREE.PointsMaterial({
    color:0xff66cc,
    size:1.2
});

let particles = new THREE.Points(geometry, material);
scene.add(particles);

// ‚ù§Ô∏è Heart target positions
let heartTargets = [];
for(let i=0;i<particleCount;i++){
    let t = Math.random()*Math.PI*2;
    let r = Math.random()*20;

    let x = 16*Math.pow(Math.sin(t),3);
    let y = 13*Math.cos(t)
          -5*Math.cos(2*t)
          -2*Math.cos(3*t)
          -Math.cos(4*t);

    heartTargets.push({
        x:x*3 + (Math.random()-0.5)*5,
        y:y*3 + (Math.random()-0.5)*5,
        z:(Math.random()-0.5)*40
    });
}

// üíå Text target positions
let textTargets = [];
let canvas2 = document.createElement("canvas");
let ctx2 = canvas2.getContext("2d");
canvas2.width = 1024;
canvas2.height = 512;

ctx2.fillStyle="white";
ctx2.font="bold 80px Arial";
ctx2.textAlign="center";

let message = "–î–∞—à–∞, —Å—å–æ–≥–æ–¥–Ω—ñ —è —Ö–æ—á—É –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ —Ç–æ–±—ñ –≤—Å–µ—Å–≤—ñ—Ç\n—Ç–∏ –Ω–∞–π–∫—Ä–∞—â–∞ —ñ —è —Ç–µ–±–µ –ª—é–±–ª—é";

let lines = message.split("\n");
lines.forEach((line,i)=>{
    ctx2.fillText(line,512,200 + i*100);
});

let data = ctx2.getImageData(0,0,1024,512);

for(let y=0;y<512;y+=4){
    for(let x=0;x<1024;x+=4){
        let index = (x+y*1024)*4;
        if(data.data[index+3]>128){
            textTargets.push({
                x:(x-512)/4,
                y:(256-y)/4,
                z:0
            });
        }
    }
}

let phase = 0;

function animate(){
    requestAnimationFrame(animate);

    let pos = particles.geometry.attributes.position.array;

    for(let i=0;i<particleCount;i++){
        let target;

        if(phase < 300){
            target = textTargets[i % textTargets.length];
        } else {
            target = heartTargets[i % heartTargets.length];
        }

        pos[i*3] += (target.x - pos[i*3])*0.02;
        pos[i*3+1] += (target.y - pos[i*3+1])*0.02;
        pos[i*3+2] += (target.z - pos[i*3+2])*0.02;
    }

    particles.geometry.attributes.position.needsUpdate = true;

    if(phase > 300){
        particles.rotation.y += 0.01;
        particles.rotation.x = Math.sin(phase*0.01)*0.2;
    }

    stars.rotation.y += 0.0005;

    phase++;

    renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
