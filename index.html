<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Dasha ‚ù§Ô∏è</title>
<style>
body{margin:0;overflow:hidden;background:black;font-family:Arial,sans-serif;}
#message{
 position:absolute;
 top:50%;left:50%;
 transform:translate(-50%,-50%);
 color:white;text-align:center;
 font-size:26px;max-width:90%;
 line-height:1.6;opacity:0;
 transition:opacity 2s ease;
}
canvas{display:block;}
</style>
</head>
<body>

<div id="message">
 <div>–î–∞—à–∞, —Å—å–æ–≥–æ–¥–Ω—ñ —è —Ö–æ—á—É</div>
 <div style="font-size:32px;color:#ff66cc;">–ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ —Ç–æ–±—ñ –≤—Å–µ—Å–≤—ñ—Ç.</div>
 <div>–¢–∏ –Ω–∞–π–∫—Ä–∞—â–∞ —ñ —è —Ç–µ–±–µ –ª—é–±–ª—é ‚ù§Ô∏è</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
let scene=new THREE.Scene();
let camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,0.1,2000);
camera.position.z=300;

let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
document.body.appendChild(renderer.domElement);

// ‚≠ê Stars
let starGeo=new THREE.BufferGeometry();
let starCount=2000;
let starPos=new Float32Array(starCount*3);
for(let i=0;i<starCount;i++){
 starPos[i*3]=(Math.random()-0.5)*1500;
 starPos[i*3+1]=(Math.random()-0.5)*1500;
 starPos[i*3+2]=(Math.random()-0.5)*1500;
}
starGeo.setAttribute('position',new THREE.BufferAttribute(starPos,3));
let starMat=new THREE.PointsMaterial({color:0xffffff,size:1});
let stars=new THREE.Points(starGeo,starMat);
scene.add(stars);

// ‚ù§Ô∏è Heart group
let heartGroup=new THREE.Group();
scene.add(heartGroup);

function createTextTexture(text){
 let canvas=document.createElement("canvas");
 let ctx=canvas.getContext("2d");
 canvas.width=512;
 canvas.height=128;
 ctx.fillStyle="#ff66cc";
 ctx.font="bold 48px Arial";
 ctx.textAlign="center";
 ctx.fillText(text,256,80);
 return new THREE.CanvasTexture(canvas);
}

let textTexture=createTextTexture("I LOVE YOU");
let material=new THREE.SpriteMaterial({map:textTexture,transparent:true});

for(let t=0;t<Math.PI*2;t+=0.12){
 for(let depth=-6; depth<=6; depth+=2){

  let x=16*Math.pow(Math.sin(t),3);
  let y=13*Math.cos(t)
        -5*Math.cos(2*t)
        -2*Math.cos(3*t)
        -Math.cos(4*t);

  let sprite=new THREE.Sprite(material.clone());

  sprite.position.set(x*5,y*5,depth*10);
  sprite.scale.set(60,15,1);

  heartGroup.add(sprite);
 }
}

heartGroup.visible=false;

// üéÜ Fireworks
let fireworks=[];
function launchFirework(){
 let geo=new THREE.BufferGeometry();
 let count=100;
 let positions=new Float32Array(count*3);
 let velocities=[];
 for(let i=0;i<count;i++){
  positions[i*3]=0;
  positions[i*3+1]=0;
  positions[i*3+2]=0;
  velocities.push({
   x:(Math.random()-0.5)*5,
   y:(Math.random()-0.5)*5,
   z:(Math.random()-0.5)*5
  });
 }
 geo.setAttribute('position',new THREE.BufferAttribute(positions,3));
 let mat=new THREE.PointsMaterial({color:0xffccff,size:3});
 let points=new THREE.Points(geo,mat);
 heartGroup.add(points);
 fireworks.push({mesh:points,velocities:velocities,life:60});
}
renderer.domElement.addEventListener("click",launchFirework);
renderer.domElement.addEventListener("touchstart",launchFirework);

// ‚è± Timing
let clock=new THREE.Clock();
let message=document.getElementById("message");

function animate(){
 requestAnimationFrame(animate);

 let t=clock.getElapsedTime();
 stars.rotation.y+=0.0005;

 if(t<2) message.style.opacity=t/2;
 else if(t<12) message.style.opacity=1;
 else if(t<15) message.style.opacity=1-(t-12)/3;
 else{
  message.style.display="none";
  heartGroup.visible=true;
  heartGroup.rotation.y+=0.01;
  heartGroup.rotation.x=Math.sin(t)*0.2;

  let scale=1+Math.sin(t*3)*0.05;
  heartGroup.scale.set(scale,scale,scale);
 }

 fireworks.forEach((fw,index)=>{
  let pos=fw.mesh.geometry.attributes.position.array;
  fw.velocities.forEach((v,i)=>{
   pos[i*3]+=v.x;
   pos[i*3+1]+=v.y;
   pos[i*3+2]+=v.z;
  });
  fw.mesh.geometry.attributes.position.needsUpdate=true;
  fw.life--;
  if(fw.life<=0){
   heartGroup.remove(fw.mesh);
   fireworks.splice(index,1);
  }
 });

 renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{
 camera.aspect=window.innerWidth/window.innerHeight;
 camera.updateProjectionMatrix();
 renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>

</body>
</html>
