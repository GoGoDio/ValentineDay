<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Dasha ❤️</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:black;
    font-family:Arial, sans-serif;
}

#message{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    color:white;
    text-align:center;
    font-size:26px;
    max-width:90%;
    line-height:1.6;
    opacity:0;
    transition:opacity 2s ease;
}

canvas{
    display:block;
}
</style>
</head>
<body>

<div id="message">
    <div>Даша, сьогодні я хочу</div>
    <div style="font-size:32px;color:#ff66cc;">подарувати тобі всесвіт.</div>
    <div>Ти найкраща і я тебе люблю ❤️</div>
</div>

<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let stars = [];
let fireworks = [];
let heartAngle = 0;
let showHeart = false;

for(let i=0;i<400;i++){
    stars.push({
        x:Math.random()*canvas.width,
        y:Math.random()*canvas.height,
        size:Math.random()*2
    });
}

function drawStars(){
    ctx.fillStyle="black";
    ctx.fillRect(0,0,canvas.width,canvas.height);

    ctx.fillStyle="white";
    stars.forEach(s=>{
        ctx.fillRect(s.x,s.y,s.size,s.size);
    });
}

function drawHeart(){
    ctx.save();
    ctx.translate(canvas.width/2,canvas.height/2);
    ctx.rotate(heartAngle);

    ctx.fillStyle="#ff66cc";
    ctx.font="20px Arial";
    ctx.textAlign="center";

    for(let t=0;t<Math.PI*2;t+=0.2){
        let x=16*Math.pow(Math.sin(t),3);
        let y=13*Math.cos(t)
              -5*Math.cos(2*t)
              -2*Math.cos(3*t)
              -Math.cos(4*t);

        ctx.fillText("I LOVE YOU",x*10,y*10);
    }

    ctx.restore();

    heartAngle += 0.01;
}

function createFirework(){
    let particles=[];
    for(let i=0;i<50;i++){
        particles.push({
            x:canvas.width/2,
            y:canvas.height/2,
            vx:(Math.random()-0.5)*5,
            vy:(Math.random()-0.5)*5,
            life:60
        });
    }
    fireworks.push(particles);
}

canvas.addEventListener("click",createFirework);
canvas.addEventListener("touchstart",createFirework);

function updateFireworks(){
    fireworks.forEach((fw,index)=>{
        fw.forEach(p=>{
            p.x+=p.vx;
            p.y+=p.vy;
            p.life--;

            ctx.fillStyle="pink";
            ctx.fillRect(p.x,p.y,3,3);
        });

        if(fw[0].life<=0){
            fireworks.splice(index,1);
        }
    });
}

let startTime = Date.now();
let message = document.getElementById("message");

function animate(){
    requestAnimationFrame(animate);

    let elapsed = (Date.now()-startTime)/1000;

    drawStars();

    if(elapsed<2){
        message.style.opacity = elapsed/2;
    }
    else if(elapsed<12){
        message.style.opacity = 1;
    }
    else if(elapsed<15){
        message.style.opacity = 1-(elapsed-12)/3;
    }
    else{
        message.style.display="none";
        showHeart = true;
    }

    if(showHeart){
        drawHeart();
    }

    updateFireworks();
}

animate();

window.addEventListener("resize",()=>{
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
});
</script>

</body>
</html>
