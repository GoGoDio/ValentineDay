<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Dasha ❤️</title>
<style>
body {
    margin:0;
    overflow:hidden;
    background:black;
    font-family: Arial, sans-serif;
}

#message {
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    color:white;
    text-align:center;
    font-size:32px;
    max-width:80%;
    opacity:0;
    transition:opacity 3s ease;
}

canvas { display:block; }
</style>
</head>
<body>

<div id="message">
Даша, сьогодні я хочу подарувати тобі всесвіт.<br>
Ти найкраща і я тебе люблю ❤️
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
camera.position.z = 200;

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

// ⭐ Stars
let starGeo = new THREE.BufferGeometry();
let starCount = 4000;
let starPos = new Float32Array(starCount*3);

for(let i=0;i<starCount;i++){
    starPos[i*3]=(Math.random()-0.5)*1500;
    starPos[i*3+1]=(Math.random()-0.5)*1500;
    starPos[i*3+2]=(Math.random()-0.5)*1500;
}
starGeo.setAttribute('position', new THREE.BufferAttribute(starPos,3));

let starMat = new THREE.PointsMaterial({ color:0xffffff, size:1 });
let stars = new THREE.Points(starGeo, starMat);
scene.add(stars);

// ❤️ Серце з написів
let group = new THREE.Group();
scene.add(group);

let loader = new THREE.FontLoader();
loader.load('https://threejs.org/examples/fonts/helvetiker_regular.typeface.json', function(font){

    let text = "I LOVE YOU";
    let index = 0;

    for(let t=0; t<Math.PI*2; t+=0.12){

        let x = 16*Math.pow(Math.sin(t),3);
        let y = 13*Math.cos(t)
              -5*Math.cos(2*t)
              -2*Math.cos(3*t)
              -Math.cos(4*t);

        let geo = new THREE.TextGeometry(text, {
            font: font,
            size: 2.2,
            height: 0.4
        });

        geo.center();

        let mat = new THREE.MeshBasicMaterial({ color:0xff66cc });
        let mesh = new THREE.Mesh(geo, mat);

        mesh.position.set(x*4, y*4, Math.sin(t)*20);
        mesh.lookAt(0,0,0);

        group.add(mesh);
    }

    group.visible = false;
});

let clock = new THREE.Clock();
let messageDiv = document.getElementById("message");

function animate(){
    requestAnimationFrame(animate);

    let t = clock.getElapsedTime();

    stars.rotation.y += 0.0005;

    // 0–2 сек — fade in текст
    if(t < 2){
        messageDiv.style.opacity = t/2;
    }

    // 2–12 сек — текст читається
    if(t >= 2 && t < 12){
        messageDiv.style.opacity = 1;
    }

    // 12–15 сек — fade out текст
    if(t >= 12 && t < 15){
        messageDiv.style.opacity = 1 - (t-12)/3;
    }

    // після 15 сек — показати серце
    if(t >= 15){
        messageDiv.style.display = "none";
        group.visible = true;
        group.rotation.y += 0.01;
        group.rotation.x = Math.sin(t)*0.15;

        let scale = 1 + Math.sin(t*3)*0.05;
        group.scale.set(scale,scale,scale);
    }

    renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>

</body>
</html>
